(function($){$.jCarouselLite={version:'1.3.1'};$.fn.jCarouselLite=function(options){var o=$.extend({},$.fn.jCarouselLite.defaults,options);return this.each(function(){var running=false,animCss=o.vertical?"top":"left",aniProps={},sizeCss=o.vertical?"height":"width",self=this,div=$(this),ul=div.find('ul').eq(0),tLi=ul.children('li'),tl=tLi.length,v=o.visible,start=Math.min(o.start,tl-1);if(o.circular){ul.prepend(tLi.slice(tl-v-1+1).clone(true)).append(tLi.slice(0,v).clone(true));start+=v;}
var li=ul.children('li'),itemLength=li.length,curr=start;div.css("visibility","visible");li.css({overflow:o.vertical?"hidden":'visible','float':o.vertical?"none":"left"});ul.css({margin:"0",padding:"0",position:"relative",listStyleType:"none",zIndex:1});div.css({overflow:"hidden",position:"relative",zIndex:2,left:"0px"});var liSize=o.vertical?height(li):width(li);var ulSize=liSize*itemLength;var divSize=liSize*v;li.css({width:li.width(),height:li.height()});ul.css(sizeCss,ulSize+"px").css(animCss,-(curr*liSize));div.css(sizeCss,divSize+"px");$.each(['btnPrev','btnNext'],function(index,btn){if(o[btn]){o['$'+btn]=$.isFunction(o[btn])?o[btn].call(div[0]):$(o[btn]);o['$'+btn].bind('click.jc',function(){var step=index==0?curr-o.scroll:curr+o.scroll;if(!o.circular&&Math.abs(step)==li.length){return;}
return go(step);});}});if(!o.circular){o.$btnPrev.toggleClass(o.btnDisabledClass,(o.btnPrev&&start==0));o.$btnNext.toggleClass(o.btnDisabledClass,(o.btnNext&&start+o.visible>=itemLength));}
if(o.btnGo){$.each(o.btnGo,function(i,val){$(val).bind('click.jc',function(){return go(o.circular?o.visible+i:i);});});}
if(o.mouseWheel&&div.mousewheel){div.bind('mousewheel.jc',function(e,d){return d>0?go(curr-o.scroll):go(curr+o.scroll);});}
if(o.auto){var advanceCounter=0,autoStop=iterations(tl,o);var advancer=function(){self.setAutoAdvance=setTimeout(function(){if(!autoStop||autoStop>advanceCounter){go(curr+o.scroll);advanceCounter++;advancer();}},o.timeout+o.speed);};advancer();div.bind('pauseCarousel.jc',function(event){clearTimeout(self.setAutoAdvance);div.data('pausedjc',true);}).bind('resumeCarousel.jc',function(event){advancer();div.removeData('pausedjc');});if(o.pause){div.bind('mouseenter.jc',function(){div.trigger('pauseCarousel');}).bind('mouseleave.jc',function(){div.trigger('resumeCarousel');});}}
function vis(){return li.slice(curr).slice(0,v);}
function go(to){if(!running){if(o.beforeStart){o.beforeStart.call(this,vis());}
if(o.circular){if(to<=start-v-1){ul.css(animCss,-((itemLength-(v*2))*liSize)+"px");curr=to==start-v-1?itemLength-(v*2)-1:itemLength-(v*2)-o.scroll;}else if(to>=itemLength-v+1){ul.css(animCss,-((v)*liSize)+"px");curr=to==itemLength-v+1?v+1:v+o.scroll;}else{curr=to;}}else{o.$btnPrev.toggleClass(o.btnDisabledClass,(o.btnPrev&&to<=0));o.$btnNext.toggleClass(o.btnDisabledClass,(o.btnNext&&to>=itemLength-v));if(to<0){curr=0;}else if(to>itemLength-v){curr=itemLength-v;}else{curr=to;}}
running=true;aniProps[animCss]=-(curr*liSize);ul.animate(aniProps,o.speed,o.easing,function(){if(o.afterEnd){o.afterEnd.call(this,vis());}
running=false;});}
return false;}
div.bind('endCarousel.jc',function(){if(self.setAutoAdvance){clearTimeout(self.setAutoAdvance);}
if(o.btnPrev){o[$btnPrev].addClass(o.btnDisabledClass).unbind('.jc');}
if(o.btnNext){o[$btnNext].addClass(o.btnDisabledClass).unbind('.jc');}
if(o.btnGo){$.each(o.btnGo,function(i,val){$(val).unbind('.jc');});}
if(self.setAutoAdvance){self.setAutoAdvance=null;}
div.removeData('pausejc');div.unbind('.jc');});});};$.fn.jCarouselLite.defaults={btnPrev:null,btnNext:null,btnDisabledClass:'disabled',btnGo:null,mouseWheel:false,speed:200,easing:null,auto:false,autoStop:false,timeout:4000,pause:true,vertical:false,circular:true,visible:3,start:0,scroll:1,beforeStart:null,afterEnd:null};function css(el,prop){return parseInt($.css(el[0],prop),10)||0;}
function width(el){return el[0].offsetWidth+css(el,'marginLeft')+css(el,'marginRight');}
function height(el){return el[0].offsetHeight+css(el,'marginTop')+css(el,'marginBottom');}
function iterations(itemLength,options){return options.autoStop&&(options.circular?options.autoStop:Math.min(itemLength,options.autoStop));}})(jQuery);
